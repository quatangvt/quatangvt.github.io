// Blog posts data structure
const blogPosts = [
    {
        id: 'chon-hop-qua-tang-tet',
        title: 'Cách chọn hộp quà tặng phù hợp cho dịp Tết',
        slug: 'cach-chon-hop-qua-tang-phu-hop-cho-dip-tet',
        thumbnail: 'image/hop-ngu-long-nguyet-hoi-4-banh-hinh-bat-giac/hop-ngu-long-nguyet-hoi-4-banh-hinh-bat-giac-1.jpg',
        summary: 'Tìm hiểu cách chọn hộp quà tặng phù hợp với từng đối tượng và dịp Tết để thể hiện tấm lòng thành của bạn.',
        date: '2025-01-05',
        author: 'Vân Thắng',
        content: `
            <h2>Chọn hộp quà tặng phù hợp cho dịp Tết</h2>
            
            <p>Tết Nguyên đán là dịp lễ quan trọng nhất trong năm của người Việt, và việc tặng quà là một phần không thể thiếu trong văn hóa đón Tết của chúng ta. Một hộp quà đẹp mắt không chỉ làm tăng thêm giá trị món quà mà còn thể hiện sự tôn trọng và thành ý của người tặng.</p>
            
            <h3>1. Xác định đối tượng nhận quà</h3>
            
            <p>Trước khi chọn hộp quà, bạn cần xác định rõ đối tượng nhận quà:</p>
            
            <ul>
                <li><strong>Người lớn tuổi:</strong> Nên chọn các mẫu hộp truyền thống với họa tiết như song hạc, lân vũ, sen phú quý... thể hiện sự tôn kính.</li>
                <li><strong>Đối tác kinh doanh:</strong> Hộp có thiết kế sang trọng như ngũ long nguyệt hội, lam cúc với số lượng bánh 4-6 chiếc.</li>
                <li><strong>Bạn bè, người thân:</strong> Có thể linh hoạt với các mẫu hiện đại, trẻ trung hoặc mẫu truyền thống tùy sở thích.</li>
                <li><strong>Trẻ em:</strong> Hộp quà với màu sắc tươi sáng, họa tiết vui nhộn như hộp quà 1.6 cho bé.</li>
            </ul>
            
            <h3>2. Cân nhắc ngân sách</h3>
            
            <p>Hộp quà tặng có nhiều mức giá khác nhau, phù hợp với mọi ngân sách:</p>
            
            <ul>
                <li><strong>Ngân sách thấp:</strong> Hộp 1-2 bánh hoặc hộp sen phú quý 4 bánh giá rẻ (từ 4.000đ đến 18.000đ).</li>
                <li><strong>Ngân sách trung bình:</strong> Hộp 4 bánh như hộp liên ngư, hộp lân vũ (từ 25.000đ đến 34.000đ).</li>
                <li><strong>Ngân sách cao:</strong> Hộp 6 bánh cao cấp như hộp ngũ long nguyệt hội, hộp lam cúc (từ 35.000đ trở lên).</li>
            </ul>
            
            <h3>3. Lựa chọn phụ kiện đi kèm</h3>
            
            <p>Để tăng thêm giá trị món quà, bạn có thể kết hợp hộp bánh với các phụ kiện đi kèm:</p>
            
            <ul>
                <li>Túi đựng bánh trung thu với nhiều kích cỡ phù hợp.</li>
                <li>Khay trong suốt giúp bảo quản bánh tốt hơn.</li>
                <li>Dao nĩa nhựa cao cấp với nhiều màu sắc trang nhã.</li>
            </ul>
            
            <p>Lưu ý: Nên đặt hàng sớm trước Tết ít nhất 2-3 tuần để đảm bảo có đủ số lượng và mẫu mã như ý muốn.</p>
            
            <h3>4. Kết hợp với nội dung bên trong</h3>
            
            <p>Hộp quà đẹp cần đi kèm với nội dung bên trong phù hợp. Ngoài bánh trung thu truyền thống, bạn có thể cân nhắc các loại bánh hiện đại hoặc kết hợp với các sản phẩm khác như trà, kẹo, các loại hạt...</p>
            
            <p>Hãy nhớ rằng, một hộp quà đẹp mắt sẽ tạo ấn tượng ban đầu tốt, nhưng chính tấm lòng của người tặng mới là điều quan trọng nhất!</p>
        `
    },
    {
        id: 'luu-y-khi-chon-hop-banh-trung-thu',
        title: 'Những lưu ý khi chọn hộp bánh trung thu',
        slug: 'nhung-luu-y-khi-chon-hop-banh-trung-thu',
        thumbnail: 'image/hop-song-nguyet-4-6-banh/hop-song-nguyet-4-6-banh-1.jpg',
        summary: 'Các tiêu chí quan trọng cần lưu ý khi lựa chọn hộp bánh trung thu để làm quà tặng.',
        date: '2025-02-10',
        author: 'Vân Thắng',
        content: `
            <h2>Những lưu ý quan trọng khi chọn hộp bánh trung thu</h2>
            
            <p>Tết Trung thu là dịp để gia đình đoàn viên, cũng là thời điểm lý tưởng để tặng quà cho người thân, bạn bè và đối tác. Hộp bánh trung thu là món quà phổ biến trong dịp này, nhưng làm sao để chọn được hộp bánh phù hợp? Dưới đây là những lưu ý quan trọng.</p>
            
            <h3>1. Chất lượng và độ bền của hộp</h3>
            
            <p>Một hộp bánh trung thu chất lượng cần đảm bảo các yếu tố sau:</p>
            
            <ul>
                <li>Chất liệu giấy dày, cứng cáp, không dễ móp méo.</li>
                <li>In ấn sắc nét, màu sắc tươi sáng, không bị lem hoặc nhòe.</li>
                <li>Các mối nối và góc hộp được dán kỹ, không bị hở.</li>
                <li>Có lớp tráng bóng hoặc cán màng để tăng độ bền và tránh ẩm.</li>
            </ul>
            
            <h3>2. Kích thước phù hợp với bánh</h3>
            
            <p>Kích thước hộp cần phù hợp với số lượng và kích thước bánh:</p>
            
            <ul>
                <li>Hộp 1 bánh: Phù hợp với bánh size 150-250g.</li>
                <li>Hộp 2 bánh: Dành cho 2 bánh cỡ vừa hoặc lớn.</li>
                <li>Hộp 4 bánh: Thông dụng nhất, phù hợp với bánh size 9-11.</li>
                <li>Hộp 6 bánh: Dành cho bánh mini hoặc bánh cỡ nhỏ.</li>
            </ul>
            
            <p>Lưu ý: Nên chọn hộp vừa vặn với bánh, tránh quá rộng khiến bánh bị xê dịch hoặc quá chật làm bánh bị ép méo.</p>
            
            <h3>3. Thiết kế và họa tiết phù hợp với đối tượng</h3>
            
            <p>Họa tiết trên hộp nên phù hợp với đối tượng nhận quà:</p>
            
            <ul>
                <li><strong>Người lớn tuổi:</strong> Họa tiết truyền thống như hoa sen, song hạc, lân vũ...</li>
                <li><strong>Đối tác kinh doanh:</strong> Thiết kế thanh lịch, trang nhã như mẫu ngũ long nguyệt hội, lam cúc...</li>
                <li><strong>Bạn bè, đồng nghiệp:</strong> Có thể chọn mẫu hiện đại, trẻ trung.</li>
                <li><strong>Trẻ em:</strong> Họa tiết vui nhộn, nhiều màu sắc.</li>
            </ul>
            
            <h3>4. Tính tiện dụng sau khi sử dụng</h3>
            
            <p>Một hộp quà tốt là hộp có thể tái sử dụng sau khi đã dùng hết bánh:</p>
            
            <ul>
                <li>Hộp có thiết kế đẹp mắt có thể dùng làm hộp đựng đồ trang sức, văn phòng phẩm.</li>
                <li>Hộp có cấu trúc chắc chắn có thể dùng để đựng các vật dụng nhỏ.</li>
                <li>Một số hộp cao cấp có thể trở thành vật trang trí trong nhà.</li>
            </ul>
            
            <p>Cuối cùng, dù chọn hộp nào, điều quan trọng nhất vẫn là tấm lòng của người tặng. Một hộp bánh trung thu đẹp mắt kèm theo lời chúc chân thành sẽ là món quà ý nghĩa trong dịp Tết Trung thu!</p>
        `
    },
    {
        id: 'xu-huong-hop-qua-tang-2025',
        title: 'Xu hướng hộp quà tặng năm 2025',
        slug: 'xu-huong-hop-qua-tang-nam-2025',
        thumbnail: 'image/hop-lam-cuc-4-6-banh/hop-lam-cuc-4-6-banh-1.jpg',
        summary: 'Khám phá những xu hướng mới nhất về hộp quà tặng trong năm 2025, từ thiết kế đến chất liệu.',
        date: '2025-03-15',
        author: 'Vân Thắng',
        content: `
            <h2>Xu hướng hộp quà tặng năm 2025</h2>
            
            <p>Thị trường hộp quà tặng luôn có những thay đổi để đáp ứng nhu cầu và thị hiếu ngày càng cao của người tiêu dùng. Năm 2025 chứng kiến nhiều xu hướng mới đáng chú ý sau đây.</p>
            
            <h3>1. Thiết kế tối giản, hiện đại</h3>
            
            <p>Năm 2025 chứng kiến sự lên ngôi của phong cách thiết kế tối giản (minimalism) với các đặc điểm:</p>
            
            <ul>
                <li>Hạn chế họa tiết rườm rà, thay vào đó là các đường nét đơn giản, thanh thoát.</li>
                <li>Sử dụng 2-3 màu chủ đạo thay vì nhiều màu sắc phức tạp.</li>
                <li>Typography (kiểu chữ) đóng vai trò quan trọng trong thiết kế.</li>
                <li>Tập trung vào chất lượng vật liệu hơn là hình thức bên ngoài.</li>
            </ul>
            
            <h3>2. Chất liệu thân thiện với môi trường</h3>
            
            <p>Xu hướng sử dụng vật liệu thân thiện với môi trường ngày càng được ưa chuộng:</p>
            
            <ul>
                <li>Giấy tái chế hoặc giấy từ nguồn bền vững, có chứng nhận FSC.</li>
                <li>Mực in thực vật, không độc hại.</li>
                <li>Hạn chế sử dụng nhựa và các vật liệu khó phân hủy.</li>
                <li>Thiết kế để có thể tái sử dụng nhiều lần, tránh lãng phí.</li>
            </ul>
            
            <h3>3. Cá nhân hóa theo yêu cầu</h3>
            
            <p>Dịch vụ cá nhân hóa hộp quà tặng đang trở thành xu hướng mạnh mẽ:</p>
            
            <ul>
                <li>In tên người nhận hoặc người tặng trên hộp quà.</li>
                <li>Thiết kế họa tiết theo yêu cầu riêng của khách hàng.</li>
                <li>Tùy chỉnh kích thước, hình dáng hộp phù hợp với nội dung bên trong.</li>
                <li>Kết hợp công nghệ AR (Thực tế tăng cường) để tạo trải nghiệm độc đáo.</li>
            </ul>
            
            <h3>4. Fusion giữa truyền thống và hiện đại</h3>
            
            <p>Xu hướng kết hợp giữa yếu tố truyền thống và hiện đại đang được ưa chuộng:</p>
            
            <ul>
                <li>Sử dụng họa tiết truyền thống nhưng được thể hiện theo phong cách đương đại.</li>
                <li>Kết hợp kỹ thuật in ấn hiện đại với hoa văn dân gian.</li>
                <li>Tái hiện các biểu tượng văn hóa truyền thống qua góc nhìn mới mẻ.</li>
            </ul>
            
            <h3>5. Tương tác đa giác quan</h3>
            
            <p>Hộp quà tặng không chỉ đẹp mắt mà còn tạo trải nghiệm đa giác quan:</p>
            
            <ul>
                <li>Bề mặt có texture đặc biệt, tạo cảm giác thú vị khi chạm vào.</li>
                <li>Sử dụng kỹ thuật in nổi, in lõm để tăng trải nghiệm xúc giác.</li>
                <li>Một số hộp cao cấp có tích hợp âm thanh khi mở hộp.</li>
                <li>Hộp với mùi hương nhẹ nhàng (như hương trà, hương hoa) tạo ấn tượng đặc biệt.</li>
            </ul>
            
            <p>Năm 2025, thị trường hộp quà tặng ngày càng phát triển đa dạng, đáp ứng nhu cầu và kỳ vọng cao của người tiêu dùng. Bằng cách nắm bắt các xu hướng mới, bạn có thể chọn được những hộp quà không chỉ đẹp mắt mà còn mang ý nghĩa và giá trị lâu dài.</p>
        `
    }
];

// Hiển thị danh sách bài viết khi trang được tải
document.addEventListener('DOMContentLoaded', function() {
    displayBlogList();
    
    // Kiểm tra xem có tham số bài viết trên URL không
    const urlParams = new URLSearchParams(window.location.search);
    const postSlug = urlParams.get('post');
    
    if (postSlug) {
        // Nếu có, hiển thị bài viết đó
        const post = blogPosts.find(post => post.slug === postSlug);
        if (post) {
            displayBlogPost(post);
        } else {
            displayBlogList(); // Nếu không tìm thấy bài viết, hiển thị danh sách
        }
    }
    
    // Xử lý sự kiện quay lại danh sách
    document.querySelector('.back-to-list').addEventListener('click', function(e) {
        e.preventDefault();
        displayBlogList();
        // Xóa tham số trên URL
        history.pushState({}, '', 'blog.html');
    });
});

// Hiển thị danh sách bài viết
function displayBlogList() {
    const blogListElement = document.getElementById('blog-list');
    const blogContentElement = document.getElementById('blog-content');
    
    // Hiển thị danh sách, ẩn nội dung chi tiết
    blogListElement.classList.remove('hidden');
    blogContentElement.classList.add('hidden');
    
    // Xóa nội dung cũ
    blogListElement.innerHTML = '';
    
    // Thêm các bài viết vào danh sách
    blogPosts.forEach(post => {
        const blogCard = createBlogCard(post);
        blogListElement.appendChild(blogCard);
    });
}

// Tạo card cho mỗi bài viết
function createBlogCard(post) {
    const card = document.createElement('div');
    card.className = 'blog-card bg-white overflow-hidden';
    
    card.innerHTML = `
        <img src="${post.thumbnail}" alt="${post.title}" class="w-full h-48 object-cover">
        <div class="p-4">
            <h3 class="text-lg font-semibold mb-2">${post.title}</h3>
            <p class="text-gray-600 text-sm mb-3">${formatDate(post.date)} | ${post.author}</p>
            <p class="text-gray-700 mb-4">${post.summary}</p>
            <a href="?post=${post.slug}" class="read-more-link text-blue-600 hover:underline">Đọc tiếp &rarr;</a>
        </div>
    `;
    
    // Thêm sự kiện click cho card
    card.querySelector('.read-more-link').addEventListener('click', function(e) {
        e.preventDefault();
        displayBlogPost(post);
        // Cập nhật URL với slug của bài viết
        history.pushState({}, '', `?post=${post.slug}`);
    });
    
    return card;
}

// Hiển thị nội dung bài viết
function displayBlogPost(post) {
    const blogListElement = document.getElementById('blog-list');
    const blogContentElement = document.getElementById('blog-content');
    const blogDetailElement = document.getElementById('blog-detail');
    
    // Ẩn danh sách, hiển thị nội dung chi tiết
    blogListElement.classList.add('hidden');
    blogContentElement.classList.remove('hidden');
    
    // Tạo nội dung HTML cho bài viết
    blogDetailElement.innerHTML = `
        <h1 class="text-3xl font-bold mb-3">${post.title}</h1>
        <p class="text-gray-600 mb-4">${formatDate(post.date)} | ${post.author}</p>
        <img src="${post.thumbnail}" alt="${post.title}" class="w-full h-64 object-cover rounded-lg mb-6">
        <div class="blog-content">
            ${post.content}
        </div>
    `;
    
    // Cuộn lên đầu trang
    window.scrollTo(0, 0);
}

// Format ngày tháng
function formatDate(dateString) {
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const date = new Date(dateString);
    return date.toLocaleDateString('vi-VN', options);
}

// Hàm tạo slug từ một chuỗi tiếng Việt có dấu (sử dụng lại từ products.js)
function createSlug(str) {
    // Chuyển chuỗi sang chữ thường và bỏ dấu
    str = str.toLowerCase();
    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
    str = str.replace(/ì|í|ị|ỉ|ĩ/g, "i");
    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
    str = str.replace(/đ/g, "d");
    
    // Thay khoảng trắng bằng dấu gạch ngang
    str = str.replace(/\s+/g, "-");
    
    // Xóa các ký tự đặc biệt
    str = str.replace(/[^a-z0-9-]/g, "");
    
    return str;
} 